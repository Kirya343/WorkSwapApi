<aside class="listing-sidebar" th:fragment="userInfoSidebar(user)">
    <div class="seller-card" th:if="${user != null}">
        <img th:replace="~{fragments/small-components :: avatar(user=${user}, size='100', class='seller-avatar')}"></img>
        <div class="seller-info">
            <h4 th:text="${user.name ?: '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞–≤—Ç–æ—Ä'}">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</h4>
            <div class="seller-rating">
                <span th:text="#{listing.rating}">–†–µ–π—Ç–∏–Ω–≥: </span>
                <span th:text="${user.averageRating}">4.5</span> ‚òÖ
            </div>
        </div>
        <div class="seller-actions">
            <div th:if="${isAuthenticated}">
                <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–ª–∞–¥–µ–ª–µ—Ü -->
                <div th:unless="${isOwner}">
                    <form action="/secure/messenger/chat" method="get">
                        <input type="hidden" name="sellerId" th:value="${user.id}">
                        <button type="submit" class="btn btn-primary" th:text="#{listing.write}">–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
                    </form>
                </div>

                <a th:href="@{'/secure/listing/edit/' + ${listing.id}}"
                    class="btn btn-primary"
                    th:if="${isOwner and activePage == 'listing'}" th:text="#{listing.edit}"></a>
            </div>
            <div th:unless="${isAuthenticated}">
                <a href="/login" class="btn btn-primary" th:text="#{login.to.write}">–í–æ–π—Ç–∏, —á—Ç–æ–±—ã –Ω–∞–ø–∏—Å–∞—Ç—å</a>
            </div>
        </div>
    </div>

    <div class="contact-card" th:if="${user != null}">
        <h3 th:text="#{listing.author.contacts}">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
        <div class="contact-methods">
            <div class="contact-item" th:if="${user.phoneVisible and user.phone != null}">
                <span class="contact-icon">üì±</span>
                <span th:text="${user.phone}"></span>
            </div>
            <div class="contact-item" th:if="${user.emailVisible and user.email != null}">
                <span class="contact-icon">‚úâÔ∏è</span>
                <span th:text="${user.email}"></span>
            </div>
            <span th:if="${!(user.phoneVisible and user.phone != null) and !(user.emailVisible and user.email != null)}" th:text="#{no.contacts}"></span>
        </div>
    </div>
    
    <div class="resume-card hover-animation-card" th:if="${resume != null and resume.published and activePage == 'profile'}" th:onclick="window.location.href = '/resume/' + [[${resume.id}]]">
        <img th:replace="~{fragments/small-components :: avatar(user=${user}, size='70', class='')}"></img>
        <div class="resume-info">
            <h3 th:text="${resume.profession}">–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</h3>
            <div class="resume-meta">
                <span class="resume-education" th:text="#{'education.' + ${resume.education}}">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</span>
            </div>
        </div>
    </div>
</aside>